<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Claude Token Tracker - Settings</title>
  <link rel="stylesheet" href="../assets/styles/devtools-theme.css">
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="options-container">
    <!-- Header -->
    <header class="stats-header">
      <div class="header-content">
        <div class="header-text">
          <h1 class="stats-title">Settings</h1>
          <p class="stats-subtitle">Configuration & Preferences</p>
        </div>
        <div class="header-actions">
          <div class="header-actions-left">
            <button id="save-settings" class="btn btn-primary">Save</button>
            <button id="reset-defaults" class="btn btn-ghost">Reset Defaults</button>
          </div>
          <div class="header-actions-right">
            <button id="open-stats" class="btn btn-ghost">View Statistics</button>
          </div>
        </div>
      </div>
    </header>

    <div class="options-content">
      <!-- TOKEN ESTIMATION -->
      <section class="settings-section">
        <div class="section-header-row">
          <h2 class="section-title">Token Estimation</h2>
        </div>
        <div class="section-description">Configure how character counts are converted to token estimates</div>

        <div class="settings-group">
          <div class="setting-item">
            <label class="setting-label">
              <span class="label-text">Central Ratio</span>
              <span class="label-description">Default chars/token ratio for all content types</span>
            </label>
            <input type="number" id="central-ratio" class="input-field" value="2.6" step="0.1" min="1" max="5">
          </div>

          <div class="subsection">
            <h3 class="subsection-title">Type-specific Fine-tuning</h3>
            <p class="subsection-description">Override central ratio for specific content types. Leave empty to use central ratio.</p>

            <div class="setting-item">
              <label class="setting-label">
                <span class="label-text">User Message</span>
              </label>
              <input type="number" id="ratio-user" class="input-field" placeholder="Use central" step="0.1" min="1" max="5">
            </div>

            <div class="setting-item">
              <label class="setting-label">
                <span class="label-text">User Documents</span>
              </label>
              <input type="number" id="ratio-docs" class="input-field" placeholder="Use central" step="0.1" min="1" max="5">
            </div>

            <div class="setting-item">
              <label class="setting-label">
                <span class="label-text">Thinking</span>
              </label>
              <input type="number" id="ratio-thinking" class="input-field" placeholder="Use central" step="0.1" min="1" max="5">
            </div>

            <div class="setting-item">
              <label class="setting-label">
                <span class="label-text">Assistant</span>
              </label>
              <input type="number" id="ratio-assistant" class="input-field" placeholder="Use central" step="0.1" min="1" max="5">
            </div>

            <div class="setting-item">
              <label class="setting-label">
                <span class="label-text">Tool Content</span>
              </label>
              <input type="number" id="ratio-tool" class="input-field" placeholder="Use central" step="0.1" min="1" max="5">
            </div>
          </div>

          <div class="info-box">
            <p class="info-title">Tips</p>
            <p class="info-text">• Code-heavy content: 2.0-2.4 chars/token</p>
            <p class="info-text">• Regular text: ~2.6 chars/token</p>
            <p class="info-text">• Documents/PDFs: 2.8-3.0 chars/token</p>
          </div>
        </div>
      </section>

      <!-- OVERLAY SETTINGS -->
      <section class="settings-section">
        <div class="section-header-row">
          <h2 class="section-title">Overlay Settings</h2>
        </div>
        <div class="section-description">Configure the floating round viewer widget</div>

        <div class="settings-group">
          <div class="setting-item checkbox-item">
            <label class="checkbox-label">
              <input type="checkbox" id="overlay-default" class="checkbox">
              <span class="checkbox-text">Enable overlay by default on new chats</span>
            </label>
          </div>

          <div class="setting-item checkbox-item">
            <label class="checkbox-label">
              <input type="checkbox" id="overlay-remember-position" class="checkbox" checked>
              <span class="checkbox-text">Remember overlay position</span>
            </label>
          </div>
        </div>
      </section>

      <!-- ADVANCED SETTINGS -->
      <section class="settings-section">
        <div class="section-header-row">
          <h2 class="section-title">Advanced</h2>
        </div>
        <div class="section-description">Developer and power user options</div>

        <div class="settings-group">
          <div class="setting-item checkbox-item">
            <label class="checkbox-label">
              <input type="checkbox" id="console-filter" class="checkbox" checked>
              <span class="checkbox-text">Console spam filter</span>
              <span class="checkbox-description">Filter out noisy console messages from Claude.ai</span>
            </label>
          </div>

          <div class="setting-item checkbox-item">
            <label class="checkbox-label">
              <input type="checkbox" id="debug-mode" class="checkbox">
              <span class="checkbox-text">Debug mode</span>
              <span class="checkbox-description">Show detailed logging in console (may impact performance)</span>
            </label>
          </div>
        </div>
      </section>

      <!-- DATA MANAGEMENT -->
      <section class="settings-section">
        <div class="section-header-row">
          <h2 class="section-title">Data Management</h2>
        </div>
        <div class="section-description">Export, import, or reset your tracking data</div>

        <div class="settings-group">
          <div class="data-actions">
            <button id="export-data" class="btn btn-secondary">
              <span>Export Data (JSON)</span>
            </button>
            <button id="import-data" class="btn btn-secondary">
              <span>Import Data</span>
            </button>
            <button id="reset-data" class="btn btn-danger">
              <span>Reset All Data</span>
            </button>
          </div>
          <input type="file" id="import-file" accept=".json" style="display: none;">

          <div class="info-box warning-box">
            <p class="info-title">Warning</p>
            <p class="info-text">Resetting will permanently delete all tracked conversations and statistics. This action cannot be undone.</p>
          </div>

          <div class="storage-info" id="storage-info">
            <p class="storage-text">Storage used: <strong id="storage-used">Loading...</strong> of <strong id="storage-quota">--</strong></p>
          </div>
        </div>
      </section>

      <!-- SUPPORT SECTION -->
      <section class="settings-section support-section">
        <div class="section-header-row">
          <h2 class="section-title">Support the Project</h2>
        </div>
        <div class="section-description">Enjoying Claude Token Tracker? Consider supporting its development!</div>

        <div class="support-content">
          <p class="support-text">
            This extension is free and open-source. Your support helps maintain and improve it with new features, bug fixes, and updates.
          </p>

          <div class="support-buttons">
            <a href="https://ko-fi.com/yourname" target="_blank" class="btn btn-primary support-btn">
              <span>Buy me a coffee</span>
            </a>
            <a href="https://github.com/yourname/claude-token-tracker" target="_blank" class="btn btn-ghost support-btn">
              <span>Star on GitHub</span>
            </a>
          </div>

          <p class="support-thanks">Thank you for your support!</p>
        </div>
      </section>
    </div>

    <!-- Save notification -->
    <div id="save-notification" class="notification hidden">
      <span class="notification-icon">✅</span>
      <span class="notification-text">Settings saved successfully!</span>
    </div>
  </div>

  <script src="../shared/constants.js"></script>
  <script src="../shared/utils.js"></script>
  <script src="options.js"></script>
</body>
</html>